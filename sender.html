<!DOCTYPE html>
<html>

<head>

    <head>
        <style>
            body {
                color: rgb(248, 248, 242);
                background-color: rgb(39, 40, 34);
            }

            .head {
                height: 50px;
            }

            .toolbar {
                height: 25px;
            }

            .content {
                /* (100% - head - tail)/2 - toolbar -20 */
                height: calc((100vh - 50px - 20px) / 2 - 25px - 20px);
                border: 1px solid grey;
            }

            .tail {
                height: 20px;
            }
        </style>
    </head>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/codemirror.min.css">
    </link>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/theme/monokai.min.css">
    </link>
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/codemirror.min.js"></script>
    <script type="text/javascript" src="js/python.js"></script>
    <script type="text/javascript" src="https://codemirror.net/addon/comment/comment.js"></script>

</head>

<body>
    <div class="head">
        <h2>CircuitPython Online IDE
            <span title="Connect the IDE to the microcontroller.">
                <button id="connect" onClick='clickConnect()'> Connect </button>
            </span>
        </h2>
    </div>

    <div class="toolbar">
        Editor
        <span title="The script file you are currently working on.">
            <text id="filename"></text>
        </span>
        <span title="Open a python script file on the microcontroller. Usually `code.py` or `main.py`.">
            <button id="inputfile"> Open </button>
        </span>
        <span title="Save changes to the opened script file. 
This will trigger a `soft rebot` on the microcontroller, and run the saved script immediately.">
            <button id="save" onClick='save_and_run(editor)'> Save and Run </button>
        </span>
        <span title="Download Editor content as a Python script file.">
            <button onclick="save_code()">Save as</button>
        </span>
    </div>
    <div class="content">
        <div id="my_div">
        </div>
    </div>
    <div class="toolbar">
        Serial
        <span title="Remove all data from the Serial Console">
            <button onClick="serial_value_text=''; serial.setValue('')"> Clear </button>
        </span>
        <span title="Download data in the Serial Console as text file.">
            <button onclick="savelog()">Save log</button>
        </span>
        <span title="Send a `Ctrl-C` signal to the microcontroller">
            <button onclick="sendCTRLC()">CTRL-C</button>
        </span>
        <span title="Send a `Ctrl-D` signal to the microcontroller">
            <button onclick="sendCTRLD()">CTRL-D</button>
        </span>
    </div>
    <div class="content" style ='overflow-y: scroll'>
        <div id='out_frame'>
            <div id="serial_R"></div>
            <div id="serial_T" style="border: 1px solid grey; position:relative">
                <span title="Send command(s) to the microcontroller.">
                    <button onclick="run_command(command);"
                        style="position: absolute; bottom: 0; right: 0; z-index: 10">
                        Send
                    </button>
                </span>
            </div>
        </div>
    </div>

    <div class="tail">
        <span title="Tutorials, downloads, API documents, libraries, forums and a lot more.">
            <button onclick="window.open('https://circuitpython.org/')">
                CircuitPython Homepage
            </button>
        </span>
        <span title="Documents and Source code of this IDE on Github">
            <button onclick="window.open('https://github.com/urfdvw/CircuitPython-online-IDE#workflow-aka-how-to-use')">
                IDE Help
            </button>
        </span>
        <span title="Bugs? Feature suggestions?">
            <button
                onclick="window.open('https://docs.google.com/forms/d/e/1FAIpQLSdupiJIRViFwPpuQC1hMp8gRvhxACLoAjgepm_-IRZumwK7Cg/viewform?usp=sf_link')">
                Feedback
            </button>
        </span>
        <span title="If you are using CircuitPython After the class, please use this IDE instead.
            It has more features and easier to use.">
            <button
                onclick="window.open('https://urfdvw.github.io/CircuitPython-online-IDE/')">
                Full IDE
            </button>
        </span>
    </div>
    <script src="https://js.pusher.com/4.0/pusher.min.js"></script>
    <script type="text/javascript" src="js/sender.js">
    </script>
</body>

</html>